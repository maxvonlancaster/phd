\section{Проміжні нескінченно диференційовні функції на проміжках числової прямої.}

Система множин $\mathcal{A}$ називається \textit{вписаною} в систему множин $\mathcal{B}$ (позначається: $\mathcal{A}\preccurlyeq \mathcal{B}$), якщо для довільного $A\in\mathcal{A}$ існує $B\in\mathcal{B}$, таке, що $A\subseteq B$.

Кажуть, що відрізки $I=[a,b]$ та $J=[c,d]$ \textit{перетинаються нетривіально}, якщо $a<c<b<d$.

\textit{Ланцюжком} для відрізка $[a,b]$ ми називатимемо скінченну послідовність відрізків $I_{1},...,I_{n}$, таку, що відрізки $I_{k}$ та $I_{k+1}$ нетривіально перетинаються для кожного $k=1,...,n-1$, відрізки $I_{k}$ та $I_{k+2}$ не перетинаються для кожного $k=1,...,n-2$ і $\bigcup\limits_{k=1}^{n} I_{k}\supseteq [a,b]$.

Надалі через $\overset{\circ}{A}$ ми позначатимемо внутрішність множини $A$.

\begin{lemma}
\label{smint_l1}
Нехай $I=[a,b]$, $P_{j}=[\alpha_{j},\beta_{j}]$ і $\alpha_{j}<\beta_{j}$ при $j=0,1,...,m$ та $\tilde{a}=\min\{\beta_{0},b\}$, причому $[\tilde{a},b)\subseteq \bigcup\limits_{j=1}^{m} \overset{\circ}{P}_{j}$ і $a\in \overset{\circ}{P}_{0}$. Тоді існує такий ланцюжок відрізків $I_{k}=[a_{k},b_{k}]$, де $k=0,1,...,n$, що система $\mathcal{I}=\{I_{0},I_{1},..,I_{n}\}$ вписана в систему $\mathcal{P}=\{P_{0},P_{1},...,P_{m}\}$, причому $a_{0}=a$, $b_{n}=b$ і $I_{0}\subseteq P_{0}$.
\end{lemma}

\begin{proof}
За умовою $\alpha_{0}<a<\beta_{0}$. Якщо $\beta_{0}\geq b$, то ми покладаємо $a_{0}=a$, $b_{0}=b$, $I_{0}=[a_{0},b_{0}]$ і послідовність з одного відрізка $I_{0}$ буде шуканим ланцюжком.

Нехай $\beta_{0}<b$. Покладемо $b_{0}=\beta_{0}=\tilde{a}$, $I_{0}=[a_{0},b_{0}]$ і $j_{0}=0$. Оскільки $b_{0}\in [\tilde{a},b)$, то існує такий індекс $j_{1}=1,...,m$, що $b_{0}\in\overset{\circ}{P}_{j_{1}}$, тобто $\alpha_{j_{1}}<b_{0}<\beta_{j_{1}}$. Візьмемо $a_{1}=\frac{\max\{\alpha_{j_{1}},a\}+b_{0}}{2}$, $b_{1}=\min\{\beta_{j_{1}};b\}$ і покладемо $I_{1}=[a_{1},b_{1}]$. Оскільки $\alpha_{j_{1}}<b_{0}$ і $a<b_{0}$, то $\max\{\alpha_{j_{1}},a\}<b_{0}$, а тому $a_{0}=a\leq \max\{\alpha_{j_{1}},a\}<a_{1}<b_{0}$ і $a_{1}>\alpha_{j_{1}}$. З другого боку $b_{1}\leq\beta_{j_{1}}$, отже, $I_{1}\subseteq P_{j_{1}}$. Крім того, $b_{0}<\beta_{j_{1}}$ і $b_{0}<b$, тому $b_{0}<b_{1}$. Таким чином, $a_{0}<a_{1}<b_{0}<b_{1}$, отже, відрізки $I_{0}$ та $I_{1}$ нетривіально перетинаються. Якщо $b_{1}=b$, то пара $(I_{0},I_{1})$ буде шуканим ланцюжком.

Нехай $b_{1}<b$. Оскільки $b_{1}>b_{0}=\tilde{a}$, та $b_{1}\in [\tilde{a},b)$, отже, існує $j_{2}$, таке, що $b_{1}\in\overset{\circ}{P}_{j_{2}}=(\alpha_{j_{2}},\beta_{j_{2}})$, тобто, $\alpha_{j_{2}}<b_{1}<\beta_{j_{2}}$. Оскільки $b_{1}=\beta_{j_{1}}\notin \overset{\circ}{P}_{j_{1}}$ і $b_{1}\in \overset{\circ}{P}_{j_{2}}$, то $j_{1}\neq j_{2}$. Тому всі три номери $j_{0}$, $j_{1}$ і $j_{2}$ різні.
Візьмемо $a_{2}=\frac{\max\{\alpha_{j_{2}},b_{0}\}+b_{1}}{2}$, $b_{2}=\min\{\beta_{j_{2}};b\}$, $I_{2}=[a_{2},b_{2}]$.
Оскільки $\alpha_{j_{2}}<b_{1}$ і $b_{0}<b_{1}$, то $\max\{\alpha_{j_{2}},b_{0}\}<b_{1}$, а тому $a_{1}\leq \max\{\alpha_{j_{2}},b_{0}\}<a_{2}<b_{1}$ і $a_{2}>\alpha_{j_{2}}$. З другого боку, $b_{2}\leq\beta_{j_{2}}$, отже, $I_{2}\subseteq P_{j_{2}}$. Крім того, $b_{1}<\beta_{j_{2}}$ і $b_{1}<b$, тому $b_{1}<b_{2}$. Таким чином, $a_{1}<a_{2}<b_{1}<b_{2}$, отже, відрізки $I_{1}$ та $I_{2}$ нетривіально перетинаються. Окрім того, оскільки $b_{0}\leq \max\{\alpha_{j_{2}},b_{0}\}<a_{2}$, то відрізки $I_{0}$ та $I_{2}$ не перетинаються. Якщо $b_{2}=b$, то трійка $\{I_{0},I_{1},I_{2}\}$ буде шуканим ланцюжком, якщо ж $b_{2}<b$, то побудова продовжується.

Припустимо, що для деякого номера $k>2$ вже побудовані відрізки $I_{s}=[a_{s},b_{s}]$ при $s=0,...,k-1$, такі, що сусідні відрізки $I_{s}$ та $I_{s+1}$ перетинаються нетривіально, при $s=0,...,k-2$, а відрізки $I_{s}$ та $I_{s+2}$ не перетинаються при $s=0,...,k-3$. При цьому визначені різні номери $0=j_{0},j_{1},...,j_{j-1}$ серед чисел $0,1,...,m$, такі, що $I_{s}\subseteq P_{j_{s}}$ при $s=0,...,k-1$, $a_{s}=\frac{\max\{\alpha_{j_{s}},b_{s-2}\}+b_{s-1}}{2}$, $b_{s}=\beta_{j_{s}}$ при $s=2,...,k-2$, $b_{k-1}=\min\{\beta_{j_{k-1}};b\}$ і $b_{0}<b_{1}<...<b_{k-1}$. Якщо $b_{k-1}=b$, то набір $(I_{0},...,I_{k-1})$ і буде шуканим ланцюжком відрізків.

Нехай $b_{k-1}<b$. Тоді $b_{k-1}\in[\tilde{a},b)$, отже, існує такий номер $j_{k}=1,...,m$, що $b_{k-1}\in \overset{\circ}{P}_{j_{k}}$, тобто $\alpha_{j_{k}}<b_{k-1}<\beta_{j_{k}}$. За побудовою $b_{k-1}=\beta_{j_{k-1}}>b_{k-2}=\beta_{j_{k-2}}>...>b_{1}=\beta_{j_{1}}$, отже, $b_{k-1}\notin \overset{\circ}{P}_{j_{s}}$ при $s=1,...,k-1$. Крім того, $j_{k}\neq j_{0}=0$, бо $j_{k}\geq 1$. Таким чином, всі номери $j_{0},...,j_{k}$ різні.

Покладемо $a_{k}=\frac{\max\{\alpha_{j_{k}},b_{k-2}\}+b_{k-1}}{2}$, $b_{k}=\min\{\beta_{j_{k}};b\}$ і $I_{k}=[a_{k},b_{k}]$. Перевіримо, що $a_{k-1}<a_{k}<b_{k-1}<b_{k}$. Оскільки за припущенням відрізки $I_{k-2}$ та $I_{k-1}$ нетривіально перетинаються, то $a_{k-2}<a_{k-1}<b_{k-2}<b_{k-1}$, зокрема, $a_{k-1}<b_{k-2}$, а значить, $a_{k-1}<\max\{\alpha_{j_{k}},b_{k-2}\}$. Але $\alpha_{j_{k}}<b_{k-1}$ і $b_{k-2}<b_{k-1}$, тому $\max\{\alpha_{j_{k}},b_{k-2}\}<b_{k-1}$. Тому $a_{k-1}<\max\{\alpha_{j_{k}},b_{k-2}\}<a_{k}<b_{k-1}$. Далі $b_{k-1}<\beta_{j_{k}}$ і $b_{k-1}<b$, тому $b_{k-1}<b_{k}$. Таким чином, $a_{k}<b_{k}$, і відрізки $I_{k-1}$ та $I_{k}$ нетривіально перетинаються. До того ж $$a_{k}>\max\{\alpha_{j_{k}},b_{k-2}\}\geq b_{k-2},$$ отже, відрізки $I_{k-2}$ та $I_{k}$ не перетинаються. Нарешті, $$\alpha_{j_{k}}\leq \max\{\alpha_{j_{k}},b_{k-2}\}<a_{k}<b_{k}\leq \beta_{j_{k}},$$ Отже, $I_{k}\subseteq P_{j_{k}}$. Таким чином, побудову можна продовжити ще на один крок.

Оскільки число індексів відрізків $P_{j}$ дорівнює $m+1$, то процес побудови відрізків $I_{k}$ не може тривати до нескінченності, адже індекси $j_{0},...,j_{k}$, які виникають у побудові є різними. Отже, процедура завершується на якомусь кроці $n\leq m$ і ми отримаємо шуканий ланцюжок $I_{0},...,I_{n}$ для відрізка $I$.
\end{proof}



Розглянемо функцію $f:\mathbb{R}\rightarrow \mathbb{R}$
$$f(x)= \left\{ \begin{array}{c} e^{\frac{1}{x^{2}-1}},\textmd{ }|x|<1; \\ 0,\textmd{ }|x|\geq 1    \end{array} \right.$$ і доведемо, що $f$~--- нескінченно диференційовна. Знайдемо першу похідну: $f'(x)=e^{\frac{1}{x^{2}-1}}\frac{-2x}{(x^{2}-1)^{2}}$, $|x|<1$, $f'(x)=0,$ $|x|>1$.

Оскільки $t=\frac{1}{1-x^{2}}\rightarrow +\infty$ при $x\rightarrow1-0$, то $$\lim_{x\rightarrow  1-0} \frac{e^{\frac{1}{x^{2}-1}}}{(x^{2}-1)^{2}}=\lim_{t\rightarrow +\infty}e^{-t}t^{2}=\lim_{t\rightarrow +\infty}\frac{t^{2}}{e^{t}}=\lim_{t\rightarrow +\infty}\frac{2t}{e^{t}}=\lim_{t\rightarrow +\infty}\frac{2}{e^{t}}=0.$$ Отже, $$\lim_{x\rightarrow 1-0} f'(x)=\lim\limits_{x\rightarrow \pm 1-0}^{} (-2x) (\frac{ e^{\frac{1}{x^{2}-1}} }{(x^{2}-1)^{2}})=0.$$ Звідси, на основі правила Лопіталя, отримуємо, що $$f'_{Л}(1)=\lim_{x\rightarrow 1-0}\frac{f(x)-f(1)}{x-1}=\lim_{x\rightarrow 1-0}f'(x)=0$$ отже, в точці $1$ існує ліва похідна $f'_{Л}(1)$ і вона дорівнює нулю. Але очевидно, що і права похідна $f'_{П}(1)$. Тому функція $f$ диференційовна в точці 1 і $f'(1)=0$. Оскільки $f(-x)=f(x)$ на $\mathbb{R}$, то і $f'(-1)=0$. Таким чином, функція $f$ диференційовна на $\mathbb{R}$ і $$f'(x)= \left\{ \begin{array}{c} (-2x) (\frac{ e^{\frac{1}{x^{2}-1}} }{(x^{2}-1)^{2}}),\textmd{ }|x|<1; \\ 0,\textmd{ }|x|\geq 1    \end{array} \right.$$

Припустимо, що $n\geq1$ і функція $f$ є $n$ разів диференційовною, причому $$f^{(n)}(x)= \left\{ \begin{array}{c}  \frac{ P_{n}(x) }{(x^{2}-1)^{2^{n}}} e^{\frac{1}{x^{2}-1}},\textmd{ }|x|<1; \\ 0,\textmd{ }|x|\geq 1    \end{array} \right.$$ де $P_{n}(x)$~--- якийсь многочлен. Тоді при $|x|<1$ $$f^{(n+1)}(x)=\frac{P'_{n}(x)(x^{2}-1)^{2^{n}}-2^{n}(x^{2}-1)^{2^{n}-1}\cdot 2x\cdot P_{n}(x)}{(x^{2}-1)^{2^{n+1}}}e^{\frac{1}{x^{2}-1}}+$$ $$+\frac{P_{n}(x)}{(x^{2}-1)^{2^{n}}}e^{\frac{1}{x^{2}-1}} \cdot (\frac{-2x}{(x^{2}-1)^{2}})=\frac{P_{n+1}(x)}{(x^{2}-1)^{2^{n+1}}}e^{\frac{1}{x^{2}-1}},$$ де $P_{n+1}(x)$ деякий многочлен, і $f^{n+1}(x)=0$ при $|x|>1$. Так само як і на першому кроці, легко встановити, що і $f^{n+1}(\pm 1)=0$. Тому і функція $f$~--- $n+1$ раз диференційовна, причому $$f^{(n+1)}(x)= \left\{ \begin{array}{c}  \frac{ P_{n+1}(x) }{(x^{2}-1)^{2^{n+1}}} e^{\frac{1}{x^{2}-1}},\textmd{ }|x|<1; \\ 0,\textmd{ }|x|\geq 1    \end{array} \right.$$ де $P_{n+1}(x)$~---  деякий многочлен.

Звідси випливає, що $f$~--- нескінченно диференційовна функція.

Позначимо $I=\int\limits^{+\infty}_{-\infty}f(x)dx=\int\limits^{1}_{-1}e^{\frac{1}{x^{2}-1}}dx$. Ясно, що $I>0$. Розглянемо функцію $g(x)=\int\limits^{x}_{-\infty} \frac{f(t)}{I}dt$. Оскільки функція $f$ неперервна, то $g'(x)=f(x)\geq 0$ на $\mathbb{R}$. Тому функція $g$ нескінченно диференційовна на $\mathbb{R}$, $g$ зростає на $\mathbb{R}$, причому $g(x)=0$ при $x\leq-1$ і $g(x)=1$ при $x\geq 1$.

Позначимо символом $C^{\infty}(\mathbb{R})$ простір всіх нескінченно диференцйовних функцій $h:\mathbb{R}\rightarrow \mathbb{R}$.


\begin{lemma}
\label{smint_l2}
Нехай $a,b,\alpha,\beta \in \mathbb{R}$ і $a<b$. Тоді існує функція $\varphi\in C^{\infty}(\mathbb{R})$, така, що $\varphi(x)=\alpha$ при $x\leq a$, $\varphi(x)=\beta$ при $x\geq \beta$, і $\varphi$ зростає при $\alpha<\beta$, спадає при $\alpha>\beta$ та є сталою при $\alpha=\beta$.
\end{lemma}

\begin{proof}
Позначимо $$\psi(x)=2\frac{x-a}{b-a}-1$$. Зрозуміло, що $\psi$~--- це строго зростаюча функція. Доведемо, що функція $\varphi(x)=(\beta-\alpha)g(\psi(x))+\alpha$, де $g$~--- вище побудована функція, є шуканою.

Нехай $\alpha=\beta$. Тоді $\varphi(x)=\alpha=\beta$ для всіх $x\in\mathbb{R}$, тобто, функція $\varphi(x)$ є сталою.

Якщо ж $\alpha<\beta$, то $\beta-\alpha>0$, а отже, з того, що $g$~--- зростає, випливає, що $\varphi$ також зростаюча. При $x\leq a$ маємо, що $x-a\leq 0$, $2\frac{x-a}{b-a}\leq 0$, а отже, $\psi(x)=2\frac{x-a}{b-a}-1\leq-1$, а при $u\leq-1$ $g(u)=0$, отже, $\varphi(x)=\alpha$. При $x\geq b$ маємо, що $x-a\geq b-a$, $\frac{x-a}{b-a}\leq 1$, $\psi(x)\geq 1$, а при $u\geq1$ $g(u)=1$, отже, $\varphi(x)=\beta-\alpha+\alpha=\beta$.

Якщо ж $\alpha>\beta$, то $\beta-\alpha<0$, а отже, з того, що $g$ зростає, випливає, що функція $\varphi(x)=(\beta-\alpha)g(\psi(x))+\alpha$ спадає $(\gamma\in\mathbb{R})$. Аналогічно до попереднього випадку маємо, що при $x\leq a$ $\varphi(x)=\alpha$ та при $x\geq b$ $\varphi(x)=\beta$. Отже, функція $\varphi$ є шуканою.
\end{proof}


\begin{theorem}
\label{smint_t1}
Нехай $(g,h)$~--- строга пара Гана на $I=[a,b]$, і $\gamma$~--- довільне число з інтервалу $(g(a),h(a))$. Тоді для пари $(g,h)$ існує строго проміжна $C^{\infty}$-функція $f:I\rightarrow \mathbb{R}$, така, що $f$ локально стала в точках $a$ і $b$ і $f(a)=\gamma$.
\end{theorem}

\begin{proof}
Для кожної точки $x\in (a,b]$ розглянемо довільне число $y_{x}$, таке, що $g(x)<y_{x}<h(x)$, і покладемо $y_{a}=\gamma$. Оскільки функція $g$ напівнеперервна зверху, а $h$ знизу, то для кожного $x\in I$ існує таке $\delta_{x}>0$, що $g(u)<y_{x}<h(u)$ при $u\in V_{x}=(x-2\delta_{x},x+2\delta_{x})$ і $u\in I$.

Якщо $d=a+2\delta_{a}\geq b$, то стала функція $f(x)=y$ і буде шуканою. Нехай $d<b$. Покладемо $c=a+\delta_{a}$. Тоді $a<c<b$. Зрозуміло, що відрізок $[c,b]$ покривається системою інтервалів $U_{x}=(x-\delta_{x},x+\delta_{x})$, де $x$ пробігає $[c,b]$, адже $x\in U_{x}$ для кожного $x\in [c,b]$. За лемою Гейне-Бореля існує скінчене число точок $x_{1},...,x_{m}$ з відрізка $[c,b]$, таких, що $[c,b]\subseteq\bigcup\limits_{j=1}^{m}U_{x_{j}}$.

Візьмемо $P_{j}=\overline{U_{x_{j}}}$, $P_{0}=[a,c]$ та $\mathcal{P}=\{P_{j},j=1,...,m\}$. За лемою 1, існує ланцюжок з відрізків $I_{k}=[a_{k},b_{k}]$, $k=0,1,...,n$, вписаний в покриття $\mathcal{P}$, такий, що $I_{0}\subseteq P_{0}$. Оскільки для довільного $k=0,...,m$ маємо, що $I_{k}\subseteq P_{j_{k}}=\overline{U_{x_{j_{k}}}}\subseteq V_{x_{j_{k}}}$, то $g(u)<y_{x_{k_{j}}}<h(u)$ на $I\cap I_{k}$. Надалі будемо позначати $z_{0}=y_{a}=\gamma$ і $y_{x_{j_{k}}}=z_{k}$ при $k=1,...,n$. Для нашого ланцюжка виконуються такі нерівності: $$a=a_{0}<a_{1}<b_{0}<a_{2}<b_{1}<...<a_{n}<b_{n-1}<b_{n}=b$$ Покладемо $A_{k}=[a_{k},b_{k-1}],k=1,...,n$; $B_{0}=[a_{0},a_{1}]$, $B_{k}=[a_{k-1},a_{k+1}]$ при $k=1,...,n-1$, $B_{n}=[b_{n-1},b_{n}]$. Маємо, що для кожного $k=0,...,n$ виконуються включення $B_{k}\subseteq I_{k}$ і для кожного $k=1,...,n$~--- включення $A_{k}=I_{k-1}\cap I_{k}$.

Для кожного відрізку $A_{k}=[a_{k},b_{k-1}]$ при $k=1,...,n$, використовуючи \ref{smint_l1} побудуємо $C^{\infty}$-функцію $\varphi_{k}:\mathbb{R}\rightarrow \mathbb{R}$, для якої $\varphi_{k}(x)=z_{k-1}$ при $x\leq a_{k}$, $\varphi_{k}(x)=z_{k}$ при $x\geq b_{k-1}$, причому функція $\varphi_{k}$ зростає при $z_{k-1}\leq z_{k}$ і спадає при $z_{k-1}\geq z_{k}$. Визначимо функцію $f:[a,b]\rightarrow \mathbb{R}$, покладаючи $f(x)=z_{k}$, якщо $x\in B_{k}$ при $k=0,1,...,n$, і $f(x)=\varphi_{k}(x)$, якщо $x\in A_{k}$ при $k=1,...,n$.

Зрозуміло, що функція $f$ нескінченно диференційовна, локально стала у точках $a$ і $b$, і $f(a)=z_{0}=\gamma$.

Покажемо, що $f$ є строго проміжною функцією для пари $(g,h)$ на $[a,b]$. Нехай $x\in [a,b]$. Тоді існує такий номер $k=0,1,...,n$, що $x\in B_{k}$, або такий номер $k=1,...,n$, що $x\in A_{k}$.

Припустимо, що $x\in B_{k}$ при $k=1,...,n-1$. Тоді $f(x)=z_{k}=y_{j_{k}}$ і $g(u)<y_{j_{k}}<h(u)$ на $V_{j_{k}}$. Оскільки відрізки $I_{k-1}$ та $I_{k}$ і $I_{k}$ та $I_{k+1}$ нетривіально перетинаються і $I_{k-1}\cap I_{k+1}={\O}$, то $$a_{k-1}<a_{k}<b_{k-1}<a_{k+1}<b_{k}<b_{k+1},$$ отже, $B_{k}=[b_{k-1},a_{k+1}]\subseteq [a_{k},b_{k}]=I_{k}\subseteq V_{x_{j_{k}}}$ а тому $f(x)=z_{k}\in (g(x),h(x))$.

Нехай $x\in B_{0}$. Тоді $f(x)=z_{0}=y_{a}=\gamma$. Але $a=a_{0}<a_{1}<b_{0}$, тому $$B_{0}=[a_{0},a_{1}]\subseteq [a_{0},b_{0}]=I_{0}\subseteq P_{0}=[a,c]\subseteq V_{a}.$$ Отже $f(x)=\gamma\in (g(x),h(x))$.

Нарешті, нехай $X\in B_{n}$. Тоді $f(x)=z_{n}y_{j_{n}}$. Але відрізки $I_{n-1}$ та $I_{n}$ нетривіально перетинаються. Тому $a_{n-1}<a_{n}<b_{n-1}<b_{n}$, отже, $$B_{n}=[b_{n-1},b_{n}]\subseteq [a_{n},b_{n}]=I_{n}\subseteq V_{x_{j_{n}}}.$$ В такому разі $f(x)=y_{j_{n}}in (g(x),h(x))$.

Нехай тепер $x\in A_{k}$ для деякого $k=1,...,n$. За побудовою $g(u)<z_{s}<h(u)$ на $I_{s}$ для довільного $s=0,1,...,n$. Нехай $c_{k}=\min\{z_{k-1},z_{k}\}$ і $d_{k}=\max\{z_{k-1},z_{k}\}$. Оскільки $A_{k}=I_{k-1}\cap I_{k}$, то $g(x)<c_{k}\leq d_{k}<h(x)$. Але $f(x)=\varphi_{k}(x)\in [c_{k},d_{k}]$. Тому $g(x)<f(x)<h(x)$. Таким чином, $f$~--- це шукана функція.
\end{proof}

Заміною $t=b-x$ з \ref{smint_t1} легко виводиться і такий результат.


\begin{theorem}
\label{smint_t2}
Нехай $(g,h)$~--- строга пара Гана на $I=[a,b]$, і $\gamma$~--- довільне число з інтервалу $(g(b),h(b))$. Тоді для пари $(g,h)$ існує строго проміжна $C^{\infty}$-функція $f:I\rightarrow \mathbb{R}$, така, що $f$ локально стала в точках $a$ і $b$ і $f(b)=\gamma$.
\end{theorem}

Зауважимо, що з леми про існування вписаного ланцюжка відрізків можна вивести і теорему \ref{smint_t2}.





З допомогою теорем \ref{plin_t2}, \ref{plin_t3} \ref{smint_t1} і \ref{smint_t2} ми можемо здійснити побудову строго проміжних кусково лінійних чи $C^{\infty}$-функцій на довільному інтервалі $(a,b)$ на числовій прямій.


\begin{theorem}
\label{smint_t3}
Нехай $I=(a,b)$ довільний інтервал в $\mathbb{R}$, скінченний чи нескінченний, $x_{0}\in I$, $(g,h)$~--- строга пара Гана на $I$, і $g(x_{0})<y_{0}<h(x_{0})$. Тоді існує строго проміжна для пари $(g,h)$ нескінченно диференційовна функція $f:I\rightarrow \mathbb{R}$, така, що $f(x_{0})=y_{0}$.
\end{theorem}

\begin{proof}
Легко побудувати строго зростаючу послідовність точок $b_{n}\in (x_{0},b)$ і строго спадну послідовність точок $a_{n}\in (a,x_{0})$, таких, що $\lim_{n\rightarrow \infty}b_{n}=b$ і $\lim_{n\rightarrow \infty}a_{n}=a$. Для одноманітності позначень покладемо $a_{0}=x_{0}=b_{0}$. За теоремами 3 і 4 існують такі $C^{\infty}$-функції $f_{1}:[b_{0},b_{1}]\rightarrow \mathbb{R}$ і $f_{-1}:[a_{1},a_{0}]\rightarrow \mathbb{R}$, що $f_{1}(b_{0})=f_{1}(x_{0})=y_{0}=f_{-1}(x_{0})=f_{-1}(a_{0})$, причому $f_{1}$ і $f_{-1}$ локально сталі на кінцях відрізків, де вони визначені і є строго проміжними для строгих пар Гана $(g|_{[b_{0},b_{1}]},h|_{[b_{0},b_{1}]})$ і $(g|_{[a_{1},a_{0}]},h|_{[a_{1},a_{0}]})$ відповідно. На другому кроці будуємо такі $C^{\infty}$-функції $f_{2}:[b_{1},b_{2}]\rightarrow \mathbb{R}$ і $f_{-2}:[a_{2},a_{1}]\rightarrow \mathbb{R}$, що $f_{2}(b_{1})=f_{1}(b_{1})$, $f_{-2}(a_{1})=f_{-1}(a_{1})$, причому вони є локально сталими на кінцях відрізків, де визначені, і є строго проміжними для строгих пар Гана $(g|_{[b_{1},b_{2}]},h|_{[b_{1},b_{2}]})$ і $(g|_{[a_{2},a_{1}]},h|_{[a_{2},a_{1}]})$ відповідно.

Продовжуючи цей процес до нескінченності, ми побудуємо для кожного номера $n\in \mathbb{N}$ такі  $C^{\infty}$-функції $f_{n}:[b_{n-1},b_{n}]\rightarrow \mathbb{R}$ і $f_{-n}:[a_{n},a_{n-1}]\rightarrow \mathbb{R}$, що локально сталі на кінцях відрізків, де вони визначені, задовольняють умову узгодження $f_{n}(b_{n-1})=f_{n-1}(b_{n-1})$ та $f_{-n}(a_{n-1})=f_{-(n-1)}(a_{n-1})$ і є строго проміжними для строгих пар Гана $(g|_{[b_{n-1},b_{n}]},h|_{[b_{n-1},b_{n}]})$ і $(g|_{[a_{n},a_{n-1}]},h|_{[a_{n},a_{n-1}]})$ відповідно.

Покладемо $f(x)=f_{n}(x)$ на $[[b_{n-1},b_{n}]]$ і $f(x)=f_{-n}(x)$ на $[a_{n},a_{n-1}]$ де $n$~--- довільний номер. Цими умовами коректно визначається $C^{\infty}$-функція $f:I\rightarrow \mathbb{R}$, яка і буде строго проміжною для строгої пари Гана $(g,h)$ на $I$, причому $f(x_{0})=f_{-1}(x_{0})=y_{0}$.
\end{proof}


Функцію $f:(a,b)\rightarrow \mathbb{R}$ ми називатимемо кусково лінійною, якщо існує така двостороння послідовність $(x_{n})_{n\in \mathbb{Z}}$ точок $x_{n}$ з інтервалу $(a,b)$, що $x_{n}<x_{n+1}$ для кожного $n\in \mathbb{Z}$, $\lim_{n\rightarrow +\infty}x_{n}=b$ і $\lim_{n\rightarrow -\infty}x_{n}=a$, що звуження $f|_{[x_{n},x_{n+1}]}$ є лінійною функцією для кожного $n\in \mathbb{Z}$.

Так само, як теорема \ref{smint_t3}, на основі теорем \label{smint_t1} і \label{smint_t2}, легко встановлюється:


\begin{theorem}
\label{smint_t4}
Нехай $I=(a,b)$ довільний інтервал в $\mathbb{R}$, скінченний чи нескінченний, $x_{0}\in I$, $(g,h)$~--- строга пара Гана на $I$, і $g(x_{0})<y_{0}<h(x_{0})$. Тоді існує строго проміжна для пари $(g,h)$ кусково лінійна функція $f:I\rightarrow \mathbb{R}$, така, що $f(x_{0})=y_{0}$.
\end{theorem}





Покажемо, що коли $g(x)=h(x)$ хоча б в одній точці, то проміжні кусково лінійні та нескінченно диференційовні можуть не існувати.

\textit{Приклад 1.} Візьмемо $x_{0}=1,x_{1}=\frac{1}{2},...,x_{n}=\frac{1}{2^{n}},...$

$$g(x)= \left\{ \begin{array}{c} \frac{-2x_{n}}{3},\textmd{ }x=x_{n},\textmd{ }n~-\textmd{ парне};\\ \frac{x_{n}}{3},\textmd{ }x=x_{n},\textmd{ }n~-\textmd{ непарне}; \\ \frac{x-x_{n}}{x_{n-1}-x_{n}}(g(x_{n-1})-g(x_{n}))+g(x_{n}),\textmd{ }x_{n-1}<x<x_{n}  \end{array} \right.$$

$$h(x)= \left\{ \begin{array}{c} \frac{-x_{n}}{3},\textmd{ }x=x_{n},\textmd{ }n~-\textmd{ парне};\\ \frac{2x_{n}}{3},\textmd{ }x=x_{n},\textmd{ }n~-\textmd{ непарне}; \\ \frac{x-x_{n}}{x_{n-1}-x_{n}}(h(x_{n-1})-h(x_{n}))+h(x_{n}),\textmd{ }x_{n-1}<x<x_{n}  \end{array} \right.$$

Маємо, що $h(0)=g(0)=0$, $g(x)<h(x)$ при $x\neq 0$.

Покажемо, що на всіх проміжках $[x_{k},x_{k+2}]$, $k=0,1,...$ проміжна функція $f$ не може бути лінійною. Нехай $k$~--- парне. Тоді $g(x_{k})<f(x_{k})<h(x_{k})<0<g(x_{k+1})<f(x_{k+1})<h(x_{k+1})$, та $g(x_{k+2})<f(x_{k+2})<h(x_{k+2})<0<g(x_{k+1})<g(x_{k+1})<g(x_{k+1})$, маємо, що $f(x_{k})<f(x_{k+1})$ та $f(x_{k+2})<f(x_{k+1})$~--- функція не є монотонною, а отже, і лінійною. Нехай $k$~--- непарне. Тоді $g(x_{k+1})<f(x_{k+1})<h(x_{k+1})<0<g(x_{k})<f(x_{k})<h(x_{k})$, та $g(x_{k+1})<f(x_{k+1})<h(x_{k+1})<0<g(x_{k+2})<g(x_{k+2})<g(x_{k+2})$, маємо, що $f(x_{k+1})<f(x_{k})$ та $f(x_{k+1})<f(x_{k+2})$~--- функція не є монотонною, а отже, і лінійною. Отже, $f$ не може бути кусково лінійною.

\textit{Приклад 2.} Візьмемо $g(x)=|x|$, $h(x)=2|x|$. Покажемо, що не існує проміжної нескінченно диференційовної функції.

Нехай існує проміжна нескінченно диференційовна $f$. Тоді: $$\frac{|\Delta x|}{\Delta x}=\frac{g(\Delta x)}{\Delta x}\leq \frac{f(\Delta x)}{\Delta x}\leq \frac{h(\Delta x)}{\Delta x}=\frac{2|\Delta x|}{\Delta x}.$$

Маємо, що $\lim\limits_{\Delta x\rightarrow +0}^{}\frac{\Delta x}{\Delta x} \leq \lim\limits_{\Delta x\rightarrow +0}^{}\frac{f(\Delta x)}{\Delta x} \leq \lim\limits_{\Delta x\rightarrow +0}^{}\frac{2\Delta x}{\Delta x} $ при $\Delta x>0$.

Звідси $1 \leq \lim\limits_{\Delta x\rightarrow +0}^{}\frac{f(\Delta x)}{\Delta x} \leq 2$.

З іншої сторони, $\frac{|\Delta x|}{\Delta x}\geq \frac{f(\Delta x)}{\Delta x}\geq\frac{2|\Delta x|}{\Delta x}$ при $\Delta x<0$, а отже, $\lim\limits_{\Delta x\rightarrow -0}^{}\frac{|\Delta x|}{\Delta x} \geq \lim\limits_{\Delta x\rightarrow -0}^{}\frac{f(\Delta x)}{\Delta x} \geq \lim\limits_{\Delta x\rightarrow -0}^{}\frac{2|\Delta x|}{\Delta x} $ звідси, $-1 \geq \lim\limits_{\Delta x\rightarrow -0}^{}\frac{f(\Delta x)}{\Delta x} \geq -2$

Отже, $\lim\limits_{\Delta x\rightarrow -0}^{}\frac{f(\Delta x)}{\Delta x}\leq -1$, і $\lim\limits_{\Delta x\rightarrow +0}^{}\frac{f(\Delta x)}{\Delta x}\geq 1$, а отже, $f'(0)=\lim\limits_{\Delta x\rightarrow 0}^{}\frac{f(\Delta x)}{\Delta x}$~--- не існує.



%1. Hahn H. Uber halbstetige und unstetige Functionen // Sitzungsberichte Akad.Wiss.Wien.Math.~---naturwiss.Kl.Abt.IIa.~--- 1917.~--- \textbf{126}.~--- S.91-110.

%2. Tong H. Some characterizations of normal and perfectly normal spaces // Duke Math.J.~--- 1952.~--- \textbf{19}.~--- P.289-292.

%3. Katetov M. Correction to 'On real-valued functions in topological spaces' // Fund.Math.~--- 1953.~--- \textbf{40}.~--- P.203-205.

%4. Dieudonne J. Une g\'{e}n\'{e}ralisation des espaces compacts // J. de Math. Pyres et Appl.~--- 1944.~--- \textbf{23}.~--- P.65-76.

%5. Энгелькинг Р. Общая топология.~--- М.: Мир, 1986.~--- 752 с.

%6. Dowker C. H. On countably paracompact spaces // Canad. J. Math.~--- 1951.~--- \textbf{3}.~--- P.219-224.

%7. Michael E. Continuous selections I // Ann. of Math.~--- 1956.~--- \textbf{63}.~--- P.361–382.

%8. Good C., Stares I. New proofs of classical insertion theorems // Comm. Math. Univ. Carolinae.~--- 2000.~--- \textbf{41},№1.~--- P.139-142.

%9. Yamazaki K. The range of maps on classical insertion theorems // Acta Math. Hungar.~--- 2011.~--- \textbf{132}(1-2).~--- P.42-48.

%10. Маслюченко В.К., Петей С.П. Поточкові границі неперервних монотонних функцій та функцій обмеженої варіації // Бук. мат. журн. — 2015. — 3,№2. — С.64-71.

%11. Маслюченко В.К., Мельник В.С. Теореми про проміжну афінну функцію для опуклої і вгнутої функцій // Бук. мат. журн. — 2016. — 4,№1. — С.64-71. 